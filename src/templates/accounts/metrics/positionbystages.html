{% load static %}
<body >
    <div id="container4" style="height: 500px; width: 80%; margin-left: 60px; -webkit-tap-highlight-color: transparent; user-select: none; position: relative;" _echarts_instance_="ec_1541576506014"><div style="position: relative; overflow: hidden; width: 1433px; height: 752px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas data-zr-dom-id="zr_0" width="1433" height="752" style="position: relative; left: 0px; top: 0px; width: 1433px; height: 752px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: none; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font: 14px/21px sans-serif; padding: 5px; left: 886px; top: 159px; pointer-events: none;">周五<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#E22A40;"></span>Planning: 390<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#0077B5;"></span>In Progress: 90<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#2E56F6;"></span>Offer: 290<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#d48265;"></span>视频Company: 190<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#91c7ae;"></span>搜索引擎: 1,679<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#749f83;"></span>百度: 1,090<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#ca8622;"></span>谷歌: 290<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#bda29a;"></span>必应: 190<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#6e7074;"></span>其他: 109</div></div>
    
    <script type="text/javascript">

      fetch('get_count_by_jobtitle_and_statuses', {
              method: 'GET'
            })
            .then(function(response) {
              return response.json();
            })
            .then(function(jsonResponse) {
                var dom = document.getElementById("container4");
                var myChart = echarts.init(dom);
                var app = {};
                option = null;
                app.title = 'Monhty Application Chart';

                jsonResponse.data.forEach(element => {
                    element["type"] = "bar";
                    element["stack"] = "Company";
                });
                
                option = {
                    title : {
                        text: 'Position by Stages Chart',
                        subtext: '',
                        x:'left',
                        top: '0px'
                    },
                    tooltip : {
                        trigger: 'axis',
                        axisPointer : {           
                            type : 'shadow'        
                        }
                    },
                    legend: {
                        data:jsonResponse.statuses,
                        x:'right'
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '-5%',
                        containLabel: true
                    },
                    xAxis : [
                        {
                            type : 'category',
                            data : jsonResponse.jobs
                        }
                    ],
                    yAxis : [
                        {
                            type : 'value'
                        }
                    ],
                    series : jsonResponse.data
                };
                ;
                if (option && typeof option === "object") {
                    myChart.setOption(option, true);
                }
            });
      
    </script>
  </body>